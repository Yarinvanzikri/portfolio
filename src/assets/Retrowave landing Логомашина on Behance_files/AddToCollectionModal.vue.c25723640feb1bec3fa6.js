(("undefined"!=typeof global?global:self).webpackJsonp=("undefined"!=typeof global?global:self).webpackJsonp||[]).push([[76],{"1AaN":function(e,o,t){var l=t("iPiZ");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);(0,t("DtNa").default)("384e7a48",l,!0,{})},"1VDo":function(e,o,t){"use strict";t.d(o,"a",(function(){return n}));var l=t("BHX3");function n(e){var o={isNameValid:!1,errorMessage:null};return""===e.trim()||(/[<>]|(&gt;)|(&lt;)/.test(e)?o.errorMessage=l.default.translate("collection_name_characters_not_allowed","The following characters are not permitted: < , >"):o.isNameValid=!0),o}},"2Ix9":function(e,o,t){"use strict";var l=t("K+aO"),n=Object(l.default)({},(function(){var e=this.$createElement,o=this._self._c||e;return o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 533.333 533.333"}},[o("path",{attrs:{d:"M516.7,200H333.3V16.7c0-9.2-7.5-16.7-16.7-16.7h-100C207.5,0,200,7.5,200,16.7V200H16.7C7.5,200,0,207.5,0,216.7v100\n\tc0,9.2,7.5,16.7,16.7,16.7H200v183.3c0,9.2,7.5,16.7,16.7,16.7h100c9.2,0,16.7-7.5,16.7-16.7V333.3h183.3c9.2,0,16.7-7.5,16.7-16.7\n\tv-100C533.3,207.5,525.9,200,516.7,200z"}})])}),[],!1,null,null,null);o.a=n.exports},"5M8K":function(e,o,t){var l=t("879t");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);(0,t("DtNa").default)("55a43e4c",l,!0,{})},6289:function(e,o,t){"use strict";var l=t("K+aO"),n=Object(l.default)({},(function(){var e=this.$createElement,o=this._self._c||e;return o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"960.186 616.276 170 144"}},[o("path",{attrs:{d:"M1102.077 616.276l-87.46 87.786-26.3-26.322-28.131 28.107 54.695 54.429 115.305-115.613z"}})])}),[],!1,null,null,null);o.a=n.exports},"879t":function(e,o,t){(o=e.exports=t("RDo7")(!1)).push([e.i,".AddToCollectionModal-root-1W_{cursor:default;z-index:1004}.AddToCollectionModal-modalHeader-1Vt{font-size:20px;font-weight:bold;text-align:left}@media(max-width: 603px){.AddToCollectionModal-modalHeader-1Vt{display:none}}.AddToCollectionModal-subHeaderMobile-3dN{display:none}@media(max-width: 603px){.AddToCollectionModal-subHeaderMobile-3dN{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;margin-top:15px}}.AddToCollectionModal-closeIcon-4yo{display:none}@media(max-width: 603px){.AddToCollectionModal-closeIcon-4yo{cursor:pointer;display:block;fill:#191919;height:13px;margin-top:7px;opacity:.5;width:13px}.AddToCollectionModal-closeIcon-4yo:hover{opacity:1}}.AddToCollectionModal-userCollections-3dw{border:1px solid #e8e8e8;border-radius:3px;cursor:pointer;height:327px;margin-bottom:21px;margin-top:25px;max-width:339px;overflow-x:hidden;overflow-y:auto}@media(max-width: 603px){.AddToCollectionModal-userCollections-3dw{max-width:100%}}.AddToCollectionModal-isCollectionFetching-3qk{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}.AddToCollectionModal-noCollection-3Lm{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:327px;-webkit-box-pack:center;justify-content:center}@media(max-width: 603px){.AddToCollectionModal-noCollection-3Lm{padding:0 30px}}.AddToCollectionModal-collection-24n{border-bottom:1px solid #e8e8e8;display:-webkit-box;display:flex;font-size:15px;height:60px;-webkit-box-pack:justify;justify-content:space-between;position:relative}.AddToCollectionModal-collection-24n.AddToCollectionModal-scrollableCollectionBorder-2w_:last-child{border-bottom-style:none}.AddToCollectionModal-collection-24n:hover{background-color:rgba(0,77,255,.1);color:#0057ff}.AddToCollectionModal-fetchingSpinner-2qY{height:25px;margin-right:20px;width:25px}.AddToCollectionModal-collectionSelection-3hn{color:#191919;cursor:pointer;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;padding:10px;width:100%}.AddToCollectionModal-collectionSelection-3hn:hover{color:#0057ff;text-decoration:none}.AddToCollectionModal-selected-TeI .AddToCollectionModal-collectionSelection-3hn{color:#0057ff}.AddToCollectionModal-collectionInfo-2pt{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;text-align:left;width:100%}.AddToCollectionModal-collectionName-Y3R{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:calc(100% - 50px)}.AddToCollectionModal-collectionCover-1dL{background-color:dimgray;height:40px;margin-right:12px;position:relative;width:50px}.AddToCollectionModal-collectionCoverImg-4_5{height:100%;width:100%}.AddToCollectionModal-collectionCoverImg-4_5.AddToCollectionModal-moduleCollectionCoverImg-WUE{-o-object-fit:cover;object-fit:cover}.AddToCollectionModal-coverSelected-1fC{background-color:rgba(0,77,255,.6);display:none;height:100%;opacity:0;position:absolute;top:0;width:100%}.AddToCollectionModal-selected-TeI .AddToCollectionModal-coverSelected-1fC{-webkit-box-align:center;align-items:center;color:#0057ff;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;opacity:1;-webkit-transition:.5s ease;transition:.5s ease}.AddToCollectionModal-coverCheck-2ii{fill:#fff;height:16px;width:16px}.AddToCollectionModal-collectionType-DWr{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex}.AddToCollectionModal-icon-7vq{height:13px;margin-left:4px;opacity:.42;width:13px}.AddToCollectionModal-formActions-2ZC{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between}.AddToCollectionModal-addCollection-cSY{-webkit-box-align:center;align-items:center;color:#0057ff;cursor:pointer;display:-webkit-box;display:flex;font-size:14px;font-weight:bold}.AddToCollectionModal-addCollection-cSY:hover{text-decoration:underline}.AddToCollectionModal-addButton-1BO{-webkit-box-align:center;align-items:center;background:#0057ff;border-radius:50%;display:-webkit-inline-box;display:inline-flex;height:14px;-webkit-box-pack:center;justify-content:center;margin-right:5px;width:14px}.AddToCollectionModal-addMark-3h8{fill:#fff;height:8px;width:8px}.AddToCollectionModal-saveText-1Sf{color:dimgray;display:-webkit-box;display:flex;font-size:13px;padding:9px 0}.AddToCollectionModal-savingSpinner-2cg{height:14px;margin-right:15px;width:14px}.AddToCollectionModal-checkIcon-1UV{-webkit-box-align:center;align-items:center;background:#058900;border-radius:50%;display:-webkit-inline-box;display:inline-flex;height:14px;-webkit-box-pack:center;justify-content:center;margin:2px 5px 0 0;width:14px}.AddToCollectionModal-checkMark-1tc{display:block;fill:#fff;height:6.22px;margin:0 auto;position:relative;width:8px}.AddToCollectionModal-addFirstCollectionPrompt-3Lk{color:dimgray;font-size:14px;margin:10px 0 24.5px}.AddToCollectionModal-checkBox-Uz8{display:none}",""]),o.locals={root:"AddToCollectionModal-root-1W_",modalHeader:"AddToCollectionModal-modalHeader-1Vt",subHeaderMobile:"AddToCollectionModal-subHeaderMobile-3dN",closeIcon:"AddToCollectionModal-closeIcon-4yo",userCollections:"AddToCollectionModal-userCollections-3dw",isCollectionFetching:"AddToCollectionModal-isCollectionFetching-3qk",noCollection:"AddToCollectionModal-noCollection-3Lm",collection:"AddToCollectionModal-collection-24n",scrollableCollectionBorder:"AddToCollectionModal-scrollableCollectionBorder-2w_",fetchingSpinner:"AddToCollectionModal-fetchingSpinner-2qY",collectionSelection:"AddToCollectionModal-collectionSelection-3hn",selected:"AddToCollectionModal-selected-TeI",collectionInfo:"AddToCollectionModal-collectionInfo-2pt",collectionName:"AddToCollectionModal-collectionName-Y3R",collectionCover:"AddToCollectionModal-collectionCover-1dL",collectionCoverImg:"AddToCollectionModal-collectionCoverImg-4_5",moduleCollectionCoverImg:"AddToCollectionModal-moduleCollectionCoverImg-WUE",coverSelected:"AddToCollectionModal-coverSelected-1fC",coverCheck:"AddToCollectionModal-coverCheck-2ii",collectionType:"AddToCollectionModal-collectionType-DWr",icon:"AddToCollectionModal-icon-7vq",formActions:"AddToCollectionModal-formActions-2ZC",addCollection:"AddToCollectionModal-addCollection-cSY",addButton:"AddToCollectionModal-addButton-1BO",addMark:"AddToCollectionModal-addMark-3h8",saveText:"AddToCollectionModal-saveText-1Sf",savingSpinner:"AddToCollectionModal-savingSpinner-2cg",checkIcon:"AddToCollectionModal-checkIcon-1UV",checkMark:"AddToCollectionModal-checkMark-1tc",addFirstCollectionPrompt:"AddToCollectionModal-addFirstCollectionPrompt-3Lk",checkBox:"AddToCollectionModal-checkBox-Uz8"}},FroP:function(e,o,t){"use strict";var l=t("1AaN"),n=t.n(l);o.default=n.a},Fsz8:function(e,o,t){"use strict";t.r(o);var l=t("IC1n"),n=t.n(l),i=t("2srY"),c=t.n(i),r=t("nOR9"),a=t("ePDi"),d=t("UsrC"),s=t("E8ap"),u=t("mLYF"),p=t("oWlM"),C=t("2Ix9"),f=t("OQxq"),m=t("dEpZ"),h=t("6289"),b=t("ZbwM"),v=t("K+aO"),y=Object(v.default)({},(function(){var e=this.$createElement,o=this._self._c||e;return o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 13"}},[o("g",[o("path",{attrs:{fill:"none",d:"M0,0V8.73A2.236,2.236,0,0,1,2.234,6.5H5.078A2.233,2.233,0,0,1,7.313,8.734V13H8.938V6.5h1.828A2.234,2.234,0,0,1,13,8.734V0ZM3.656,4.875A1.625,1.625,0,1,1,5.281,3.25,1.625,1.625,0,0,1,3.656,4.875Zm5.281,0A1.625,1.625,0,1,1,10.563,3.25,1.625,1.625,0,0,1,8.938,4.875Z"}}),o("circle",{attrs:{cx:"1.625",cy:"1.625",r:"1.625",transform:"translate(7.313 1.625)"}}),o("path",{attrs:{d:"M12.828,8H11v6.5h4.063V10.234A2.234,2.234,0,0,0,12.828,8Z",transform:"translate(-2.063 -1.5)"}}),o("circle",{attrs:{cx:"1.625",cy:"1.625",r:"1.625",transform:"translate(2.031 1.625)"}}),o("path",{attrs:{d:"M7.313,10.234A2.233,2.233,0,0,0,5.078,8H2.234A2.236,2.236,0,0,0,0,10.23V14.5H7.313V10.234Z",transform:"translate(0 -1.5)"}})])])}),[],!1,null,null,null).exports,M=t("LSlr");function I(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);o&&(l=l.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,l)}return t}function T(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?I(Object(t),!0).forEach((function(o){g(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}function g(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var x={components:{Modal:u.default,CreateCollectionModal:p.a,Add:C.a,Btn:f.default,Spinner:m.a,Check:h.a,LockIcon:b.a,MultipleUsersIcon:y,CloseIcon:M.default},props:{modalTitle:{type:String},projectId:{type:Number},moduleId:{type:Number},gridItemId:{type:Number},namespace:{type:String,required:!0,default:"project"},showMobileSubHeader:{type:Boolean,default:!1},query:{type:Object}},data:function(){return{componentId:n()(),isCreateCollectionVisible:!1,isCollectionFetched:!1,selectedCollectionIds:null,disableSave:!0,hideBottomBorder:!1,namespaceAsArray:this.namespace.split("/").concat("addToCollectionModal"),hasNewMoodboard:!1}},created:function(){this.$store.hasModule(this.nestedNamespace)||this.$store.registerModule(this.nestedNamespace,a.b),this.$store.dispatch(this.$options.propsData.namespace+"/addToCollectionModal/"+a.a.INIT,{projectId:this.$options.propsData.projectId,query:this.$options.propsData.query?this.$options.propsData.query:this.$route.query}),document.addEventListener("keydown",this.handleKeydown)},destroyed:function(){document.removeEventListener("keydown",this.handleKeydown),this.$store.hasModule(this.nestedNamespace)&&this.$store.unregisterModule(this.namespaceAsArray)},computed:T({},Object(r.mapState)({userCollections:function(e){return c()(e,this.getStateKeypath("userCollections"))},initialSelectedIds:function(e){return c()(e,this.getStateKeypath("initialSelectedIds"))},isCollectionSaving:function(e){return c()(e,this.getStateKeypath("isCollectionSaving"))},isCollectionSaved:function(e){return c()(e,this.getStateKeypath("isCollectionSaved"))},selectItem:function(){return this.moduleId?{id:this.moduleId,type:s.ENTITY_TYPES.MODULE}:this.gridItemId?{id:this.gridItemId,type:s.ENTITY_TYPES.MEDIA}:this.projectId?{id:this.projectId,type:s.ENTITY_TYPES.PROJECT}:void 0},nestedNamespace:function(){return this.namespace.split("/").concat("addToCollectionModal")}})),methods:T({},Object(r.mapActions)({createNewCollection:function(e,o){return e(this.namespace+"/addToCollectionModal/"+a.a.COLLECTION_CREATE_CLICK,o)},saveProjectRelatedCollection:function(e,o){return e(this.namespace+"/addToCollectionModal/"+a.a.COLLECTION_SAVE_PROJECT_CLICK,o)},updateCollectionsForModule:function(e,o){return e(this.namespace+"/addToCollectionModal/"+a.a.COLLECTION_SAVE_MODULE_CLICK,o)},updateMoodboardForGridItem:function(e,o){return e(this.namespace+"/addToCollectionModal/"+a.a.MOODBOARD_SAVE_GRID_ITEM_CLICK,o)},selectCollectionIds:function(e,o){return e(this.namespace+"/addToCollectionModal/"+a.a.COLLECTION_ID_SELECTED,o)},resetCollection:function(e,o){return e(this.namespace+"/addToCollectionModal/"+a.a.COLLECTION_SAVE_CLICK_RESET,o)}}),{saveItem:function(){return this.moduleId||this.gridItemId?this.moduleId?this.saveModule():this.gridItemId?this.saveGridItem():void 0:this.saveProject()},getStateKeypath:function(e){return this.namespace.split("/").concat(["addToCollectionModal",e]).join(".")},saveModule:function(){this.updateCollectionsForModule({moduleId:this.moduleId}),this.$emit("savedToCollectionExcept",{ids:Object(a.c)(this.userCollections),itemType:s.ENTITY_TYPES.MODULE}),this.disableSave=!0},saveGridItem:function(){this.updateMoodboardForGridItem({gridItemId:this.gridItemId}),this.$emit("savedToCollectionExcept",{ids:Object(a.c)(this.userCollections),itemType:s.ENTITY_TYPES.MEDIA}),this.disableSave=!0},saveProject:function(){this.saveProjectRelatedCollection({projectId:this.projectId}),this.$emit("savedToCollectionExcept",{ids:Object(a.c)(this.userCollections),itemType:s.ENTITY_TYPES.PROJECT}),this.disableSave=!0},addNewCollection:function(e){this.createNewCollection({collectionName:e}),this.disableSave=!1,this.hasNewMoodboard=!0},inputId:function(e){return this.componentId+"_"+e},handleKeydown:function(e){"Escape"===e.key&&this.$emit("closeAddCollectionModal")}}),watch:{userCollections:function(e){e&&(this.isCollectionFetched=!0,e.length>=6&&(this.hideBottomBorder=!0),this.$emit("isCollectionFetched"))},initialSelectedIds:function(e){this.selectedCollectionIds=e},selectedCollectionIds:function(e){this.selectCollectionIds(e)},isCollectionSaved:function(e){var o=this;if(e){var t=this.userCollections.filter((function(e){return e[d.a]}));setTimeout((function(){if(o.$emit("saveCollectionSuccesMessageRead"),o.resetCollection(),o.isCollectionFetched=!1,t.length){var e=o.hasNewMoodboard?t[0]:t[t.length-1];o.$emit("addedToNewCollection",{collection:e,item:o.selectItem})}o.hasNewMoodboard=!1}),500)}}}},w=t("OtqZ");var _=Object(v.default)(x,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("Modal",{ref:"modal",class:[e.$style.root,"e2e-Project-AddToCollectionModal-modal","moodboard-add-modal"],attrs:{showModal:!0,contentStyle:{minWidth:"400px",width:"400px"},modalTitle:e.modalTitle},on:{closeModal:function(o){return e.$emit("closeAddCollectionModal")}}},[t("div",{ref:"modalHeader",class:e.$style.modalHeader},[e._v(e._s(e.modalTitle))]),e.showMobileSubHeader?t("div",{ref:"modalHeaderMobileProject",class:[e.$style.modalHeader,e.$style.subHeaderMobile]},[e._v(" "+e._s(e.modalTitle)+" "),t("CloseIcon",{class:e.$style.closeIcon,nativeOn:{click:function(o){return e.$emit("closeAddCollectionModal")}}})],1):e._e(),e.isCollectionFetched?e.isCollectionFetched&&e.userCollections&&Boolean(e.userCollections.length)?t("ul",{ref:"userCollections",class:e.$style.userCollections},e._l(e.userCollections,(function(o,l){var n,i;return t("li",{key:l,ref:"userCollection",refInFor:!0,class:["qa-collection-modal-collection-item","e2e-AddToCollectionModal-userCollection-item",{"e2e-AddToCollectionModal-item-selectedselected":o.isSelected},e.$style.collection,(n={},n[e.$style.scrollableCollectionBorder]=e.hideBottomBorder,n),(i={},i[e.$style.selected]=o.isSelected,i)]},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCollectionIds,expression:"selectedCollectionIds"}],ref:"userCollectionCheck",refInFor:!0,class:e.$style.checkBox,attrs:{type:"checkbox",name:"selectedCollections",id:e.inputId(l)},domProps:{value:o.id,checked:Array.isArray(e.selectedCollectionIds)?e._i(e.selectedCollectionIds,o.id)>-1:e.selectedCollectionIds},on:{change:[function(t){var l=e.selectedCollectionIds,n=t.target,i=!!n.checked;if(Array.isArray(l)){var c=o.id,r=e._i(l,c);n.checked?r<0&&(e.selectedCollectionIds=l.concat([c])):r>-1&&(e.selectedCollectionIds=l.slice(0,r).concat(l.slice(r+1)))}else e.selectedCollectionIds=i},function(o){e.disableSave=!1}]}}),t("label",{class:e.$style.collectionSelection,attrs:{for:e.inputId(l)}},[t("div",{class:e.$style.collectionInfo},[t("div",{ref:"collectionCover",refInFor:!0,class:e.$style.collectionCover},[[o.items&&o.items.nodes&&Boolean(o.items.nodes.length)?t("img",{ref:"coverImage",refInFor:!0,class:[e.$style.collectionCoverImg,e.$style.moduleCollectionCoverImg],attrs:{src:o.items.nodes[0].images.size_disp&&o.items.nodes[0].images.size_disp.url||o.items.nodes[0].images.size_115&&o.items.nodes[0].images.size_115.url}}):e._e()],t("div",{class:e.$style.coverSelected},[t("Check",{class:e.$style.coverCheck})],1)],2),t("div",{ref:"collectionName",refInFor:!0,class:[e.$style.collectionName,"e2e-AddToCollectionModal-collectionName"]},[e._v(e._s(o.label))])]),t("div",{ref:"collectionType",refInFor:!0,class:e.$style.collectionType},["private"===o.privacy?t("LockIcon",{ref:"privacyLock",refInFor:!0,class:[e.$style.privacyLock,e.$style.icon]}):e._e(),o.owners&&o.owners.length>1?t("MultipleUsersIcon",{ref:"multipleOwners",refInFor:!0,class:[e.$style.multipleOwners,e.$style.icon]}):e._e()],1)])])})),0):t("div",{ref:"noUserCollections",class:[e.$style.userCollections,e.$style.noCollection]},[t("h3",[e._v(e._s(e.$translate("project_start_first_moodboard","Start Your First Moodboard")))]),t("p",{class:e.$style.addFirstCollectionPrompt},[e._v(" "+e._s(e.$translate("project_moodboard_benefits","Use moodboards to save projects for research, inspiration or just because you love them."))+" ")]),t("Btn",{ref:"createFirstCollectionBtn",class:[e.$style.saveBtn,"e2e-AddToCollectionModal-create"],attrs:{type:"primary"},on:{click:function(o){e.isCreateCollectionVisible=!0}}},[e._v(e._s(e.$translate("project_moodboard_create","Create Moodboard")))])],1):t("div",{class:[e.$style.userCollections,e.$style.isCollectionFetching]},[t("Spinner",{ref:"fetchingSpinner",class:e.$style.fetchingSpinner,attrs:{autofill:!0,color:"blue"}})],1),t("div",{class:e.$style.formActions},[t("div",{ref:"addCollectionButton",class:[e.$style.addCollection,"e2e-AddToCollectionModal-addCollection-btn"],on:{click:function(o){e.isCreateCollectionVisible=!0}}},[t("a",{class:e.$style.addButton},[t("Add",{ref:"addMark",class:e.$style.addMark})],1),e._v(" "+e._s(e.$translate("new_moodboard","New Moodboard"))+" ")]),t("div",{ref:"addActionBtn",class:e.$style.createActionBtn},[e.isCollectionSaving||e.isCollectionSaved?e._e():t("Btn",{ref:"saveBtn",class:[e.$style.saveBtn,"e2e-AddToCollectionModal-saveBtn"],attrs:{type:"primary",disabled:e.disableSave},on:{click:function(o){return e.saveItem()}}},[e._v(e._s(e.$translate("project_collection_save","Save")))]),e.isCollectionSaving?t("div",{ref:"savingButton",class:e.$style.saveText},[t("Spinner",{ref:"savingSpinner",class:e.$style.savingSpinner,attrs:{slot:"leadingIcon",autofill:!0,color:"blue"},slot:"leadingIcon"}),e._v(" "+e._s(e.$translate("project_collection_saving","Saving..."))+" ")],1):e._e(),!e.isCollectionSaving&&e.isCollectionSaved?t("div",{ref:"savedButton",class:e.$style.saveText},[t("div",{class:e.$style.checkIcon},[t("Check",{ref:"checkMark",class:e.$style.checkMark})],1),e._v(" "+e._s(e.$translate("project_collection_saved","Saved"))+" ")]):e._e()],1)]),t("CreateCollectionModal",{ref:"createCollectionModal",staticClass:"e2e-AddToCollectionModal-create-modal",attrs:{isShown:e.isCreateCollectionVisible,showMobileSubHeader:e.showMobileSubHeader},on:{closeCreateModal:function(o){e.isCreateCollectionVisible=!1},addNewCollection:function(o){return e.addNewCollection(o)}}})],1)}),[],!1,(function(e){this.$style=w.default.locals||w.default}),null,null);o.default=_.exports},OtqZ:function(e,o,t){"use strict";var l=t("5M8K"),n=t.n(l);o.default=n.a},UsrC:function(e,o,t){"use strict";t.d(o,"b",(function(){return l})),t.d(o,"a",(function(){return n})),t.d(o,"c",(function(){return i}));var l={GRID:"media_collection",IMAGE:"image",TEXT:"text"},n="isSelected",i=.5},ZbwM:function(e,o,t){"use strict";var l=t("K+aO"),n=Object(l.default)({},(function(){var e=this.$createElement,o=this._self._c||e;return o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"}},[o("path",{attrs:{fill:"none",d:"M0 0v16h16V0H0zm14 15H2V7h2V5c0-2.21 1.79-4 4-4s4 1.79 4 4v2h2v8z"}}),o("path",{attrs:{fill:"none",d:"M8 3c-1.104 0-2 .895-2 2v2h4V5c0-1.105-.896-2-2-2z"}}),o("path",{attrs:{d:"M12 5c0-2.21-1.79-4-4-4S4 2.79 4 5v2H2v8h12V7h-2V5zm-2 2H6V5c0-1.105.896-2 2-2s2 .895 2 2v2z"}})])}),[],!1,null,null,null);o.a=n.exports},ePDi:function(e,o,t){"use strict";t.d(o,"a",(function(){return C})),t.d(o,"c",(function(){return T}));t("kYxP"),t("3yYM");var l,n,i=t("c2re"),c=t.n(i),r=t("UsrC"),a=t("dHpX");function d(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);o&&(l=l.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,l)}return t}function s(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function u(e,o,t,l,n,i,c){try{var r=e[i](c),a=r.value}catch(e){return void t(e)}r.done?o(a):Promise.resolve(a).then(l,n)}function p(e){return function(){var o=this,t=arguments;return new Promise((function(l,n){var i=e.apply(o,t);function c(e){u(i,l,n,c,r,"next",e)}function r(e){u(i,l,n,c,r,"throw",e)}c(void 0)}))}}var C={INIT:"INIT",COLLECTION_CREATE_CLICK:"COLLECTION_CREATE_CLICK",COLLECTION_SAVE_PROJECT_CLICK:"COLLECTION_SAVE_PROJECT_CLICK",COLLECTION_SAVE_MODULE_CLICK:"COLLECTION_SAVE_MODULE_CLICK",MOODBOARD_SAVE_GRID_ITEM_CLICK:"MOODBOARD_SAVE_GRID_ITEM_CLICK",COLLECTION_SAVE_CLICK_RESET:"COLLECTION_SAVE_CLICK_RESET",COLLECTION_ID_SELECTED:"COLLECTION_ID_SELECTED"},f="SET_COLLECTIONS_DATA",m="APPEND_COLLECTIONS",h="SET_COLLECTION_IS_SAVING",b="SET_COLLECTION_IS_SAVED",v="UPDATE_COLLECTION_SELECTED_STATE";function y(e,o){return o.modifiedOn-e.modifiedOn}function M(e,o){for(var t=c()(e),l=0;l<t.length;l++)t[l][r.a]=o.includes(t[l].id);var n=t.filter((function(e){return e[r.a]})).sort(y),i=t.filter((function(e){return!e[r.a]})).sort(y);return n.concat(i)}function I(e){return e.map((function(e){return e[r.a]&&e.id})).filter((function(e){return e}))}function T(e){return e.map((function(e){return!e[r.a]&&e.id})).filter((function(e){return e}))}o.b={namespaced:!0,state:function(){return{userCollections:null,initialSelectedIds:null,newCollectionId:0,isCollectionSaving:!1,isCollectionSaved:!1}},actions:(l={},s(l,C.INIT,(function(e,o){var t=e.commit,l=e.dispatch,n=o.projectId,i=o.query;return p(regeneratorRuntime.mark((function e(){var o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.a.getCollectionsForAddCollectionModal({projectId:n,query:i});case 3:o=e.sent,c=o.viewer.contains.nodes.map((function(e){return e.id})),t(f,M(o.viewer.moodboards.nodes,c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l("error",e.t0,{root:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()})),s(l,C.COLLECTION_CREATE_CLICK,(function(e,o){var t=e.commit,l=e.dispatch,n=o.collectionName;return p(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.a.createCollection({collectionName:n});case 3:o=e.sent,t(m,o.collection),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l("error",e.t0,{root:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()})),s(l,C.COLLECTION_ID_SELECTED,(function(e,o){var t=e.commit;return p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(v,o);case 1:case"end":return e.stop()}}),e)})))()})),s(l,C.COLLECTION_SAVE_PROJECT_CLICK,(function(e,o){var t=e.dispatch,l=e.commit,n=e.state,i=o.projectId;return p(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(h,!0),o=I(n.userCollections).join("|"),e.abrupt("return",a.a.updateCollection({projectId:i,projectCollectionIds:o}).then((function(){l(h,!1),l(b,!0)})).catch((function(e){return l(h,!1),l(b,!1),t("error",e,{root:!0})})));case 3:case"end":return e.stop()}}),e)})))()})),s(l,C.MOODBOARD_SAVE_GRID_ITEM_CLICK,(function(e,o){var t=e.dispatch,l=e.commit,n=e.state,i=o.gridItemId;return p(regeneratorRuntime.mark((function e(){var o,c,r,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(h,!0),o=[],c=I(n.userCollections),r=c.filter((function(e){return!n.initialSelectedIds.includes(e)})),d=n.initialSelectedIds.filter((function(e){return!c.includes(e)})),r&&r.length&&o.push(a.a.saveGridItemToMoodboard({gridItemId:i,collectionIdsToSave:r})),d&&d.length&&o.push(a.a.deleteGridItemFromMoodboard({gridItemId:i,collectionIdsToRemove:d})),e.abrupt("return",Promise.all(o).then((function(){l(h,!1),l(b,!0)})).catch((function(e){return l(h,!1),l(b,!1),t("error",e,{root:!0})})));case 8:case"end":return e.stop()}}),e)})))()})),s(l,C.COLLECTION_SAVE_MODULE_CLICK,(function(e,o){var t=e.dispatch,l=e.commit,n=e.state,i=o.moduleId;return p(regeneratorRuntime.mark((function e(){var o,c,r,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(h,!0),o=[],c=I(n.userCollections),r=c.filter((function(e){return!n.initialSelectedIds.includes(e)})),d=n.initialSelectedIds.filter((function(e){return!c.includes(e)})),r&&r.length&&o.push(a.a.saveModuleToCollection({moduleId:i,collectionIdsToSave:r})),d&&d.length&&o.push(a.a.deleteModuleFromCollection({moduleId:i,collectionIdsToRemove:d})),e.abrupt("return",Promise.all(o).then((function(){l(h,!1),l(b,!0)})).catch((function(e){return l(h,!1),l(b,!1),t("error",e,{root:!0})})));case 8:case"end":return e.stop()}}),e)})))()})),s(l,C.COLLECTION_SAVE_CLICK_RESET,(function(e){var o=e.commit;o(h,!1),o(b,!1)})),l),mutations:(n={},s(n,v,(function(e,o){e.userCollections=e.userCollections.map((function(e){var t=o.includes(e.id);return function(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?d(Object(t),!0).forEach((function(o){s(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}({},e,s({},r.a,t))}))})),s(n,f,(function(e,o){e.userCollections=o,e.initialSelectedIds=I(e.userCollections)})),s(n,m,(function(e,o){e.userCollections.unshift(s({id:o.id,label:o.title,modifiedOn:o.modified_on,privacy:o.privacy,url:o.url,owners:o.owners},r.a,!0))})),s(n,h,(function(e,o){e.isCollectionSaving=o})),s(n,b,(function(e,o){e.isCollectionSaved=o})),n)}},iPiZ:function(e,o,t){(o=e.exports=t("RDo7")(!1)).push([e.i,".CreateCollectionModal-modalHeader-mOZ{font-size:20px;font-weight:bold;padding-bottom:13px;text-align:left}@media(max-width: 603px){.CreateCollectionModal-modalHeader-mOZ{display:none}}.CreateCollectionModal-subHeaderMobile-1Fx{display:none}@media(max-width: 603px){.CreateCollectionModal-subHeaderMobile-1Fx{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;margin-top:5px}}.CreateCollectionModal-closeIcon-3yr{display:none}@media(max-width: 603px){.CreateCollectionModal-closeIcon-3yr{cursor:pointer;display:block;fill:#191919;height:13px;margin-top:7px;width:13px}}.CreateCollectionModal-formContent-2So{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between}.CreateCollectionModal-inputField-2E6{max-width:278px;width:100%}@media(max-width: 603px){.CreateCollectionModal-inputField-2E6{padding-right:20px}}",""]),o.locals={modalHeader:"CreateCollectionModal-modalHeader-mOZ",subHeaderMobile:"CreateCollectionModal-subHeaderMobile-1Fx",closeIcon:"CreateCollectionModal-closeIcon-3yr",formContent:"CreateCollectionModal-formContent-2So",inputField:"CreateCollectionModal-inputField-2E6"}},mLYF:function(e,o,t){e.exports=t("ydjK")("mLYF")},oWlM:function(e,o,t){"use strict";var l=t("mLYF"),n=t("20Oh"),i=t("OQxq"),c=t("LSlr"),r=t("1VDo"),a={components:{Modal:l.default,TextInput:n.a,Btn:i.default,CloseIcon:c.default},data:function(){return{collectionName:"",errorMessage:null,isNameValid:!1}},props:{isShown:{type:Boolean,default:!1},showMobileSubHeader:{type:Boolean,default:!1},className:{type:String,default:""}},computed:{modalTitle:function(){return this.$translate("project_create_new_moodboard","Create New Moodboard")}},watch:{collectionName:function(e){var o=Object(r.a)(e),t=o.isNameValid,l=o.errorMessage;this.isNameValid=t,this.errorMessage=l}},methods:{resetErrorMessage:function(){this.errorMessage=null},addNewCollection:function(){this.isNameValid&&(this.$emit("addNewCollection",this.collectionName),this.collectionName="",this.$emit("closeCreateModal"))}}},d=t("FroP"),s=t("K+aO");var u=Object(s.default)(a,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("Modal",{ref:"modal",attrs:{showModal:e.isShown,contentStyle:{minWidth:"430px",width:"430px"},modalTitle:e.modalTitle,contentClass:e.className},on:{closeModal:function(o){return e.$emit("closeCreateModal")}}},[t("div",{class:e.$style.modalHeader},[e._v(e._s(e.modalTitle))]),e.showMobileSubHeader?t("div",{ref:"mobileSubHeader",class:[e.$style.modalHeader,e.$style.subHeaderMobile]},[e._v(" "+e._s(e.modalTitle)+" "),t("CloseIcon",{class:e.$style.closeIcon,nativeOn:{click:function(o){return e.$emit("closeCreateModal")}}})],1):e._e(),t("div",{class:e.$style.formContent},[t("TextInput",{ref:"collectionInput",class:[e.$style.inputField,"e2e-CreateCollectionModal-TextInput-input"],attrs:{name:"collection",type:"text",placeholder:e.$translate("moodboard_name","Moodboard Name"),standalone:!0,required:!0,autofocus:!0,errorMessage:e.errorMessage,isErrorMessageFixed:!0},on:{input:e.resetErrorMessage},nativeOn:{keydown:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.addNewCollection(o)}},model:{value:e.collectionName,callback:function(o){e.collectionName=o},expression:"collectionName"}}),t("Btn",{ref:"createBtn",staticClass:"e2e-CreateCollectionModal-addBtn",attrs:{type:"primary",disabled:!e.isNameValid},on:{click:e.addNewCollection}},[e._v(e._s(e.$translate("create_new_collection_button","Create")))])],1)])}),[],!1,(function(e){this.$style=d.default.locals||d.default}),null,null);o.a=u.exports}}]);
//# sourceMappingURL=AddToCollectionModal.vue.c25723640feb1bec3fa6.js.map